# FTP Backup Tool

## Описание
FTP Backup Tool — это инструмент для автоматизации процесса резервного копирования локальных данных и их загрузки на FTP-сервер. Программа включает функции:

- Локальное создание резервных копий.
- Загрузка резервных копий на FTP-сервер.
- Очистка старых локальных и удалённых копий.
- Логирование всех действий для удобства мониторинга.

---

## Основные функции

### 1. Локальное резервное копирование
- Рекурсивное копирование содержимого указанной папки в резервный каталог с текущей датой.

### 2. Загрузка на FTP
- Загрузка резервной копии на FTP-сервер с автоматическим созданием удалённых папок.
- Проверка структуры FTP и создание директорий по мере необходимости.

### 3. Очистка старых резервных копий
- Удаление локальных резервных копий, которые старше указанного периода.
- Удаление старых резервных копий на FTP-сервере.

### 4. Логирование
- Ведение логов о каждом этапе процесса: копирование, загрузка, удаление и ошибки.
- Логи сохраняются в файле `backup.log`.

---

## Установка и использование

### Требования
- Python 3.8+
- Библиотеки:
  - `ftplib`
  - `pathlib`
  - `shutil`

### Установка
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/ftp-backup-tool.git
   ```
2. Перейдите в папку проекта:
   ```bash
   cd ftp-backup-tool
   ```

### Настройка
1. Обновите настройки в скрипте `main.py`:
   ```python
   local_folder = r"D:\\Work\\Obsidian"  # Путь к локальной папке для резервного копирования
   backup_folder = r"H:\\Obsidian\\DailyBackup"  # Путь к папке для локальных резервных копий
   ftp_credentials = {
       'host': 'ftp.example.com',
       'username': 'your_username',
       'password': 'your_password'
   }
   remote_folder = "/backups/obsidian"  # Папка на FTP-сервере
   ```

### Запуск
Запустите скрипт с помощью Python:
```bash
python main.py
```

---

## Структура проекта

```plaintext
ftp-backup-tool/
├── main.py          # Основной скрипт
├── README.md        # Описание проекта
├── backup.log       # Лог-файл (создаётся автоматически)
└── requirements.txt # Список зависимостей (если нужно)
```

---

## Как это работает
1. **Создание резервной копии:**
   - Создаётся локальная копия содержимого папки с добавлением текущей даты в имя.

2. **Загрузка на FTP:**
   - Резервная копия загружается в удалённую папку на FTP-сервере.
   - Папки создаются автоматически, если их нет.

3. **Очистка старых копий:**
   - Локальные и удалённые копии старше 30 дней удаляются.

4. **Логирование:**
   - Все шаги записываются в лог-файл для диагностики.

---

## Пример лог-файла
```plaintext
2024-12-28 10:00:00,000 - INFO - Starting backup process.
2024-12-28 10:01:00,000 - INFO - Finished copying content from D:\Work\Obsidian to H:\Obsidian\DailyBackup\2024-12-28.
2024-12-28 10:02:00,000 - INFO - Uploaded file to FTP: /backups/obsidian/2024-12-28/file.txt
2024-12-28 10:03:00,000 - INFO - Deleted old backup folder: H:\Obsidian\DailyBackup\2024-11-28.
2024-12-28 10:03:30,000 - INFO - Deleted old FTP backup folder: /backups/obsidian/2024-11-28
2024-12-28 10:04:00,000 - INFO - Backup and upload process completed successfully.
```

---

## Будущие улучшения
- Поддержка SFTP для более безопасной загрузки.
- Уведомления через email или Telegram.
- GUI для настройки и запуска.
- Интеграция с облачными хранилищами (Google Drive, AWS S3).

---

## Лицензия
Проект распространяется под лицензией MIT. Подробнее см. в файле `LICENSE`.

---

<author>Foxhand</author>
<link>https://foxhands.pp.ua</link>

